# yaml-language-server: $schema=https://taskfile.dev/schema.json

version: "3"

vars:
  GREETING: Hello, world!

tasks:
  default:
    desc: Print a greeting message
    cmds:
      - echo "{{.GREETING}}"
    silent: true
  build-backend:
    desc: build backend
    cmds:
      - go build -o ./tmp/backend ./src/backend/main.go
  run-backend:
    dotenv: [".env"]
    dir: ./src/backend/
    cmds:
      - go run main.go
  run-frontend:
    dotenv: [".env"]
    dir: ./src/frontend/
    cmds:
      - npm run dev
  up:
    dir: .
    cmds:
      - docker compose up
  down:
    dir: .
    cmds:
      - docker compose down
  up-prd:
    dotenv: ["src/backend/.env", "src/frontend/.env"]
    dir: .
    cmds:
      - docker compose -f docker-compose.prd-sample.yaml up --build -d
  down-prd:
    dir: .
    cmds:
      - docker compose -f docker-compose.prd-sample.yaml down
  log-prd:
    dir: .
    cmds:
      - docker compose -f docker-compose.prd-sample.yaml logs -f
